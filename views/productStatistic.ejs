<!DOCTYPE html>
<html lang="en">
    <head>
        <% include partials/head.ejs %>
    </head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
<body class="nav-md">
    <div class="container body">
        <div class="main_container">
        <%- include('partials/navigation.ejs') %>
            <div class="right_col" role="main" style="min-height: 454px;">
                <form method="GET">
                    <div class="form-group row">
                        <div class="form-group row">
                            <label class="control-label col-md-5 col-sm-5 col-xs-5">Nhập năm(yyyy)</label>
                            <div class="col-md-9 col-sm-9 col-xs-9">
                                <input type="text" class="form-control" name="yearInput" value="<%= yearInput %>">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="control-label col-md-5 col-sm-5 col-xs-5">Nhập ngày(dd-mm-yyyy)</label>
                            <div class="col-md-9 col-sm-9 col-xs-9">
                                <input type="text" class="form-control" name="dateInput" value="<%= dateInput %>">
                            </div>
                        </div>
                        <div class="col-md-1 col-sm-1">
                            <button type="submit" class="btn btn-primary btn-sm">Apply</button>
                        </div>
                    </div>
                </form>
                <div class="col-md-5 col-sm-5">
                    <% for (var index=0; index < 12; index++){ %>
                        <input type="text" name="monthArr[]" value="<%= monthProfit[index] %>" readonly/>
                    <% } %>
                </div>
                <div class="col-md-5 col-sm-5">
                    <canvas id="myChart" width="200" height="200"></canvas>
                </div>
            </div>
        
        <footer>
            <%- include('partials/footer.ejs') %>
        </footer>
        </div>
    <%- include('partials/script.ejs') %>
    </div>
</body>
<script>
    let monthArr = document.getElementsByName('monthArr[]'); 
    let monthProfitArr=[];
    for (var i = 0; i < monthArr.length; i++) { 
        monthProfitArr.push(parseInt(monthArr[i].value));
    } 
    let ctx = document.getElementById('myChart').getContext('2d');
    let myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
        datasets: [{
            label: 'Profit',
            data: monthProfitArr,
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 99, 132, 1)',
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }   
            }]
        }
    }
    });
</script>
</html>